{% extends "template.html" %}

{% block title %}Ordres du tour{% endblock %}
{% block h1 %}Ordres du tour{% endblock %}

{% block content %}

{% if existing_orders|length > 0 %}
<table class="order-launched">
<thead>
	<tr>
		<th></th>
		<th colspan="3">Ordre</th>
		<th>Coût</th>
	</tr>
</thead>
<tfoot>
	<tr>
		<td class="total-text" colspan="4">TOTAL</td>
		<td class="total-total">{{ existing_orders_cost }}k&nbsp;¥</td>
	</tr>
</tfoot>
<tbody>
{% for order in existing_orders %}
<tr>
	<td class="order-delete"><a href="{% url "website.views.orders.delete_order" game_id=game.pk order_id=order.pk %}" title="Supprimer cet ordre">✗</a></td>
	<td class="order-name"><svg role="img" class="svg-rules svg--medium svg--white" title="{{ order.title }}"><use xlink:href="/static/img/sprite.svg#{{ order.name }}"></use></svg>
	{% if order.custom_description|length == 0 %}
	<td colspan="2" class="order-description">{{ order.description }}</td>
	{% else %}
	<td class="order-description">{{ order.description }}</td>
	<td class="order-custom">{{ order.custom_description }}</td>
	{% endif %}
	<td class="order-cost">{{ order.get_cost }}</td>
</tr>
{% endfor %}
</tbody>
</table>
{% endif %}

<h1 class="main-h1-title">Passer un ordre</h1>

<ul class="content-order-list">
{% for order in available_orders %}
	<li{% if order.available == False %} class="disabled" title="{{order.reason }}"{% endif %}>
		<svg role="img" class="svg-rules svg--large svg--white" title="{{ order.title }}"><use xlink:href="/static/img/sprite.svg#{{ order.name }}"></use></svg>
		<h2>{{ order.title }}</h2>
	</li>
{% endfor %}
</ul>

{% for order in available_orders %}
	<div class="order-form-content">
		<div class="content-title">
			<h3 style="background-image: url('{{STATIC_URL }}orders/{{ order.name }}.png')" class="order">
				<span>{{ order.title }}</span>
			</h3>
		</div>
	{% if order.available != False %}
	<form class="order-form-container" method="post" action="{% url "website.views.orders.add_order" game_id=game.pk order_type=order.name %}">
		<table>
		{{ order.form.as_table }}
		<tr class="submit-order">
			<td colspan="2">
				<div class="button-content">
					<div class="cornered-top"></div>
					<input type="submit" value="Envoyer l'ordre" />
					<div class="cornered-bottom"></div>
				</div>
			</td>
		</tr>
		</table>
	</form>
	{% else %}
	<div class="order-form-container">
		{{order.reason }}
	</div>
	{% endif %}
	</div>
{% endfor %}

{% endblock content %}
