{% extends "template.html" %}

{% block title %}{{ corporation.base_corporation.name }}{% endblock %}
{% block h1 %}{{ corporation.base_corporation.name }}{% endblock %}
{% block favicon %}{{ STATIC_URL }}corporations/{{corporation.base_corporation.slug}}.png{% endblock %}

{% block content %}
{% for market in corporation.markets %}
<table><tbody>
<tr> 
	<td>{{ market.name }}</td>
</tr>
</tbody></table>
{% endfor %}

{% for player in share_holders %}
{% endfor %}

{% if share_holders %}
<!--
<h2>Parts possédées</h2>
<table class="prop_table">
<thead>
<tr>
	<th></th>
	<th>Parts</th>
</tr>
</thead>
<tbody>
-->
<table>
<tbody>
<tr>
{% for player in share_holders %}
	<td><a href="{% url "website.views.data.player" game_id=game.pk player_id=player.pk %}">{{ player.name }}</a></td>
	{% if player.citizenship.corporation_id == corporation.pk %}
		<td> (Citizen) </td>
	{% endif %}
	<td>{{ player.qty_share }}</td>
{% endfor %}
</tr>
</tbody>
</table>

<table>
<thead>
<td></td>
{% for market in markets %}
	<td> {{ market.name }} </td>
{% endfor %}
	<td> &Sigma; </td>
	<td> Joueurs </td>
</thead>
<tbody>
{% for entry in summary %}
<tr>
	<td>{{ entry.0.base_corporation.name }}</td>
	{% for value in entry.1 %}
		<td> {% if value %} {{ value }} {% else %} - {% endif %}</td>
	{% endfor %}
	<td> {{ entry.0.assets }}</td>
	<td>{% for holder in entry.2 %} {{ holder.name }} {% endfor %}</td>
</tr>
{% endfor %}
</tbody>
</table>
{% endif %}
<a href="{% url "docs.views.corporation" corporation_slug=corporation.base_corporation.slug %}">voir la page de la corporation</a>
<!--
<h2>Description</h2>
<img src="{{ STATIC_URL }}corporations/{{corporation.base_corporation.slug}}.png" alt="{{ corporation.base_corporation.name" style="float:right; margin:0 30px"/>
{{ corporation.base_corporation.description }}
{% endblock content %}
-->

{% block scripts %}
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);
function drawChart() {
	var data = google.visualization.arrayToDataTable([
		['Tour', 'Actifs'],
		{% for asset_history in assets_history %}
			[{{ asset_history.turn }}, {{ asset_history.assets }}],
		{% endfor %}
	]);

	var options = {
		title: 'Actifs',
		backgroundColor: 'transparent',
		theme: 'maximized',
		pointSize: 4,
		legend: 'none',
		vAxis: {minValue:0, format:'#'},
	};

	var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
	chart.draw(data, options);
}
</script>
{% endblock scripts %}


